@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}


<div>
    <h1 style="">Scrieti o ecuatie!</h1>

    <div id="canvasContainer" style="width: 100%; height: 500px; top: 0; left: 0; display: block; position: relative;">
        <canvas id="can" width="400" height="400" style="border:2px solid;"></canvas>
    </div>

    <div style="width: 100%; display:flex; justify-content: space-evenly; align-items: center;">
        <div style="font-size: 2em; font-weight: bold;">Black</div>
        <div style="width:50px;height:50px;background:black;" id="black" onclick="color(this)"></div>
        <div style="font-size: 2em; font-weight: bold;">Eraser</div>
        <div style="width:50px;height:50px;background:white;border:2px solid;" id="white" onclick="color(this)"></div>

        <input type="hidden" id="SendA" value="" />
        <script>
            function sendstuff() {
                var canv = document.getElementById("can");
                var dataURL = canv.toDataURL();

                var pathname = window.location.pathname;
                var handler = '?handler=returnResult';
                var actionpath = pathname + handler;

                $.ajax({
                    url: actionpath,
                    type: 'POST',
                    data: JSON.stringify(dataURL),
                    contentType: 'application/json; charset=utf-8',
                    success: function (msg, status, jqXHR) {
                        console.log("success!");
                        console.log(msg);
                        $("#result").text("The result is " + msg);
                    },
                    error: function () {
                        console.log("error!");
                        console.log(data);
                    }
                });
            }
        </script>
        <button class="btn btn-secondary" id="btn" size="30" value="GetResult" onclick="sendstuff()">Get Result</button>

        <input class="btn btn-secondary" type="button" value="clear" id="clr" size="23" onclick="erase()" style="">
    </div>
    <img id="canvasimg" style="top:10%;left:52%;" style="display:none;">
</div>
<p style ="text-align: center; font-size: 2em; font-weight: bolder; color: darkgreen" id="result"></p>